{"ast":null,"code":"import React,{useContext,useState}from\"react\";import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";const BASE_URL=\"http://localhost:5000/api/v1/\";const GlobalContext=/*#__PURE__*/React.createContext();export const GlobalProvider=_ref=>{let{children}=_ref;const[incomes,setIncomes]=useState([]);const[expenses,setExpenses]=useState([]);const[error,setError]=useState(null);//calculate incomes\nconst addIncome=async income=>{const response=await axios.post(`${BASE_URL}add-income`,income).catch(err=>{setError(err.response.data.message);});getIncomes();};// const getIncomes = async () => {\n//     const response = await axios.get(`${BASE_URL}get-incomes`)\n//     setIncomes(response.data)\n//     console.log(response.data)\n// }\nconst getIncomes=async()=>{const response=await axios.get(`${BASE_URL}get-incomes`);const dataWithTypes=response.data.map(item=>({...item,type:'income'}));setIncomes(dataWithTypes);};const getExpenses=async()=>{const response=await axios.get(`${BASE_URL}get-expenses`);const dataWithTypes=response.data.map(item=>({...item,type:'expense'}));setExpenses(dataWithTypes);};const deleteIncome=async id=>{const res=await axios.delete(`${BASE_URL}delete-income/${id}`);getIncomes();};const totalIncome=()=>{let totalIncome=0;incomes.forEach(income=>{totalIncome=totalIncome+income.amount;});return totalIncome;};//calculate incomes\nconst addExpense=async income=>{const response=await axios.post(`${BASE_URL}add-expense`,income).catch(err=>{setError(err.response.data.message);});getExpenses();};// const getExpenses = async () => {\n//     const response = await axios.get(`${BASE_URL}get-expenses`)\n//     setExpenses(response.data)\n//     console.log(response.data)\n// }\nconst deleteExpense=async id=>{const res=await axios.delete(`${BASE_URL}delete-expense/${id}`);getExpenses();};const totalExpenses=()=>{let totalIncome=0;expenses.forEach(income=>{totalIncome=totalIncome+income.amount;});return totalIncome;};const totalBalance=()=>{return totalIncome()-totalExpenses();};const transactionHistory=()=>{const history=[...incomes,...expenses];history.sort((a,b)=>{return new Date(b.createdAt)-new Date(a.createdAt);});return history.slice(0,3);};return/*#__PURE__*/_jsx(GlobalContext.Provider,{value:{addIncome,getIncomes,incomes,deleteIncome,expenses,totalIncome,addExpense,getExpenses,deleteExpense,totalExpenses,totalBalance,transactionHistory,error,setError},children:children});};export const useGlobalContext=()=>{return useContext(GlobalContext);};","map":{"version":3,"names":["React","useContext","useState","axios","jsx","_jsx","BASE_URL","GlobalContext","createContext","GlobalProvider","_ref","children","incomes","setIncomes","expenses","setExpenses","error","setError","addIncome","income","response","post","catch","err","data","message","getIncomes","get","dataWithTypes","map","item","type","getExpenses","deleteIncome","id","res","delete","totalIncome","forEach","amount","addExpense","deleteExpense","totalExpenses","totalBalance","transactionHistory","history","sort","a","b","Date","createdAt","slice","Provider","value","useGlobalContext"],"sources":["C:/Users/aakar/ExpenseTracker/frontend/src/context/globalContext.js"],"sourcesContent":["import React, { useContext, useState } from \"react\"\nimport axios from 'axios'\n\n\nconst BASE_URL = \"http://localhost:5000/api/v1/\";\n\n\nconst GlobalContext = React.createContext()\n\nexport const GlobalProvider = ({children}) => {\n\n    const [incomes, setIncomes] = useState([])\n    const [expenses, setExpenses] = useState([])\n    const [error, setError] = useState(null)\n\n    //calculate incomes\n    const addIncome = async (income) => {\n        const response = await axios.post(`${BASE_URL}add-income`, income)\n            .catch((err) =>{\n                setError(err.response.data.message)\n            })\n        getIncomes()\n    }\n\n    // const getIncomes = async () => {\n    //     const response = await axios.get(`${BASE_URL}get-incomes`)\n    //     setIncomes(response.data)\n    //     console.log(response.data)\n    // }\n    const getIncomes = async () => {\n        const response = await axios.get(`${BASE_URL}get-incomes`);\n        const dataWithTypes = response.data.map(item => ({ ...item, type: 'income' }));\n        setIncomes(dataWithTypes);\n    }\n    \n    const getExpenses = async () => {\n        const response = await axios.get(`${BASE_URL}get-expenses`);\n        const dataWithTypes = response.data.map(item => ({ ...item, type: 'expense' }));\n        setExpenses(dataWithTypes);\n    }\n    \n\n    const deleteIncome = async (id) => {\n        const res  = await axios.delete(`${BASE_URL}delete-income/${id}`)\n        getIncomes()\n    }\n\n    const totalIncome = () => {\n        let totalIncome = 0;\n        incomes.forEach((income) =>{\n            totalIncome = totalIncome + income.amount\n        })\n\n        return totalIncome;\n    }\n\n\n    //calculate incomes\n    const addExpense = async (income) => {\n        const response = await axios.post(`${BASE_URL}add-expense`, income)\n            .catch((err) =>{\n                setError(err.response.data.message)\n            })\n        getExpenses()\n    }\n\n    // const getExpenses = async () => {\n    //     const response = await axios.get(`${BASE_URL}get-expenses`)\n    //     setExpenses(response.data)\n    //     console.log(response.data)\n    // }\n\n    const deleteExpense = async (id) => {\n        const res  = await axios.delete(`${BASE_URL}delete-expense/${id}`)\n        getExpenses()\n    }\n\n    const totalExpenses = () => {\n        let totalIncome = 0;\n        expenses.forEach((income) =>{\n            totalIncome = totalIncome + income.amount\n        })\n\n        return totalIncome;\n    }\n\n\n    const totalBalance = () => {\n        return totalIncome() - totalExpenses()\n    }\n\n    const transactionHistory = () => {\n        const history = [...incomes, ...expenses]\n        history.sort((a, b) => {\n            return new Date(b.createdAt) - new Date(a.createdAt)\n        })\n\n        return history.slice(0, 3)\n    }\n\n\n    return (\n        <GlobalContext.Provider value={{\n            addIncome,\n            getIncomes,\n            incomes,\n            deleteIncome,\n            expenses,\n            totalIncome,\n            addExpense,\n            getExpenses,\n            deleteExpense,\n            totalExpenses,\n            totalBalance,\n            transactionHistory,\n            error,\n            setError\n        }}>\n            {children}\n        </GlobalContext.Provider>\n    )\n}\n\nexport const useGlobalContext = () =>{\n    return useContext(GlobalContext)\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}